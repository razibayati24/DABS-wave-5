resources:
  jobs:
    coffee_weather:
      name: Coffee Weather
      tasks:
        - task_key: ingest
          email_notifications: {}
          notebook_task:
            notebook_path: ../notebooks/my_notebook.ipynb
            source: WORKSPACE
        - task_key: coffee_weather_refined
          depends_on: 
            - task_key: ingest
          notebook_task:
            notebook_path: ../notebooks//weather_coffee_refined.ipynb
            source: WORKSPACE
        - task_key: top_ten_rainfall_refresh
          depends_on:
            - task_key: coffee_weather_refined
          sql_task:
            file:
              path: ../queries/top_10_rainfall.sql
            warehouse_id: ${var.warehouse_id}
      
      tags:
        dev: razi_bayati
      parameters:
        - name: catalog
          default: ${var.catalog}
        - name: schema
          default: ${var.schema}
        - name: bundle_target
          default: dev